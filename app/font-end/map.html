<script async defer src="https://maps.googleapis.com/maps/api/js?v=3.exp&key=AIzaSyAHeFJa2RjWISo7BNSHF4FomY4bcPXlhtY"  type="text/javascript"></script> 

<script>
    function setupMap(paramShowMarker,currentLat,currentLong,mapId) {
			
            alert(currentLat);
			alert(currentLong);
			
			var latLongEmbedHtml="";
			
			var myOptions = {
			  zoom: 15,
			//   center: new google.maps.LatLng(currentLat,currentLong),
            center:0,
			  mapTypeId: google.maps.MapTypeId.ROADMAP
			};
			if(mapId!=""){
				mapId=mapId;
			}else{
				mapId="map-canvas";
			}

			var map = new google.maps.Map(document.getElementById(mapId),
				myOptions);
			
			if(paramShowMarker==true){
			$(".paramLatLong").remove();
			latLongEmbedHtml="<input type=\"hidden\" name=\"paramLat\" id=\"paramLat\" class=\"paramLatLong\" value=\""+currentLat+"\">";
			latLongEmbedHtml+="<input type=\"hidden\" name=\"paramLong\" id=\"paramLong\" class=\"paramLatLong\" value=\""+currentLong+"\">";
			$("#paramLatLong").html(latLongEmbedHtml);
			
			var marker = new google.maps.Marker({
			map:map,
			position: new google.maps.LatLng(currentLat,currentLong),
			draggable: true
			});
			}
			
			var infowindow = new google.maps.InfoWindow({
			//map:map,
			//content: "ตำแหน่งที่ตั้ง",
			//position:  new google.maps.LatLng(13.857326299999999, 100.7267414)
			});
			


			google.maps.event.addListener(map,'click',function(event){
				
				if(!marker){
					alert("คลิ๊กปุ่มปักหมุดก่อนครับ");
					return false;
				}
	
				infowindow.open(map,marker);
				//infowindow.setContent('ปักหมุดตรงนี้' + event.latLng);
				infowindow.setContent('ปักหมุดตรงนี้');
				//alert(event.latLng);
				
				var latt="";
				var long="";
				//find lat
				latt=event.latLng+"";
				latt=latt.split(",");
				latt=latt[0].split("(");
				latt=latt[1];
				
				
				//find long
				long=event.latLng+"";
				long=long.split(",");
				long=long[1].split(")");
				long=long[0];
				
			
				
				
				infowindow.setPosition(event.latLng);
				marker.setPosition(event.latLng);
				
				
				
				
				
				$(".paramLatLong").remove();
				latLongEmbedHtml="<input type=\"hidden\" name=\"paramLat\" id=\"paramLat\" class=\"paramLatLong\" value=\""+latt+"\">";
				latLongEmbedHtml+="<input type=\"hidden\" name=\"paramLong\" id=\"paramLong\" class=\"paramLatLong\" value=\""+long+"\">";	
				$("#paramLatLong").html(latLongEmbedHtml);
			
			
			});


		}

        setupMap(true, 13.847860,100.604274,'mapId')

    </script>


<div id="mapId"></div>